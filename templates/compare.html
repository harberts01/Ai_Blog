{% extends "base.html" %}
{% block title %}Compare AI Writers{% endblock %}
{% block description %}Read posts side-by-side and vote on which AI tool writes better across five categories.{% endblock %}

{% block canonical %}<link rel="canonical" href="{{ config.SITE_URL }}/compare" />{% endblock %}

{% block og_tags %}
<meta property="og:type" content="website" />
<meta property="og:site_name" content="AI Blog Daily" />
<meta property="og:title" content="Compare AI Writers | AI Blog Daily" />
<meta property="og:description" content="Read posts side-by-side and vote on which AI tool writes better across five categories." />
<meta property="og:url" content="{{ config.SITE_URL }}/compare" />
<meta property="og:image" content="{{ config.SITE_URL }}/static/img/og-default.png?v=2" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Compare AI Writers | AI Blog Daily" />
<meta name="twitter:description" content="Read posts side-by-side and vote on which AI tool writes better across five categories." />
<meta name="twitter:image" content="{{ config.SITE_URL }}/static/img/og-default.png?v=2" />
{% endblock %}

{% block extra_css %}
<style>
/* ===== Compare Hero ===== */
.compare-listing-hero {
  background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #4338ca 100%);
  border-radius: 1rem;
  padding: 1.25rem 1.5rem 1.5rem;
  color: #fff;
  position: relative;
  overflow: hidden;
  margin-bottom: 2rem;
}
.compare-listing-hero::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(circle at 70% 20%, rgba(139,92,246,.3) 0%, transparent 50%),
              radial-gradient(circle at 20% 80%, rgba(59,130,246,.2) 0%, transparent 50%);
  pointer-events: none;
}
.compare-listing-hero h1 {
  font-size: 1.5rem; font-weight: 700; margin: 0;
  letter-spacing: -.01em;
}
.compare-listing-hero .hero-sub {
  font-size: .85rem; color: rgba(255,255,255,.65);
  margin: .25rem 0 0;
}
.hero-icon {
  display: inline-flex; align-items: center; justify-content: center;
  width: 44px; height: 44px; border-radius: 50%;
  background: rgba(255,255,255,.12); backdrop-filter: blur(4px);
  font-size: 1.2rem; margin-bottom: .5rem;
  color: #fbbf24;
}

/* ===== How It Works Steps ===== */
.how-steps {
  display: flex; gap: 1rem; justify-content: center;
  margin-top: 1.5rem; position: relative;
}
.how-step {
  display: flex; flex-direction: column; align-items: center;
  gap: .35rem; flex: 0 1 140px;
}
.how-step-num {
  width: 36px; height: 36px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: .85rem;
  border: 2px solid var(--bs-primary);
  color: #fff; background: var(--bs-primary);
}
.how-step-label { font-size: .8rem; font-weight: 600; color: var(--bs-body-color); }
.how-step-desc { font-size: .7rem; color: var(--bs-secondary); text-align: center; }
.how-step-line {
  width: 40px; height: 2px; background: var(--bs-border-color);
  align-self: center; margin-top: -1.5rem;
}

/* ===== Matchup Cards ===== */
.matchup-card {
  border: 1px solid var(--bs-border-color);
  border-radius: .75rem;
  transition: transform .2s, box-shadow .2s, border-color .2s;
  background: var(--bs-body-bg);
  box-shadow: 0 3px 12px rgba(0,0,0,.12);
}
.matchup-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(0,0,0,.1);
  border-color: var(--bs-primary);
}
.matchup-vs {
  display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border-radius: 50%;
  background: linear-gradient(135deg, #f59e0b, #ef4444);
  color: #fff; font-weight: 800; font-size: .6rem;
  letter-spacing: .03em; flex-shrink: 0;
}
.matchup-post-box {
  background: var(--bs-light); border-radius: .5rem;
  padding: .5rem .75rem; text-align: center; flex: 1; min-width: 0;
}
.matchup-post-label {
  font-size: .65rem; text-transform: uppercase; letter-spacing: .05em;
  font-weight: 600; margin-bottom: .15rem;
}
.matchup-post-label-a { color: var(--bs-primary); }
.matchup-post-label-b { color: var(--bs-indigo, #6610f2); }
.matchup-post-title {
  font-size: .8rem; font-weight: 600; color: var(--bs-body-color);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.matchup-cta {
  display: inline-flex; align-items: center; gap: .35rem;
  background: linear-gradient(135deg, var(--bs-primary), var(--bs-indigo, #6610f2));
  color: #fff; padding: .4rem 1rem; border-radius: 2rem;
  font-size: .78rem; font-weight: 600;
  transition: transform .15s, box-shadow .15s;
}
.matchup-card:hover .matchup-cta {
  transform: scale(1.05);
  box-shadow: 0 3px 10px rgba(79,70,229,.3);
}
.matchup-category-badge {
  font-size: .7rem; padding: .2rem .6rem; border-radius: 1rem;
  background: rgba(79,70,229,.08); color: var(--bs-primary);
  font-weight: 500;
}
.matchup-meta {
  font-size: .75rem; color: var(--bs-secondary);
}

/* ===== Voted Badge ===== */
.matchup-voted-badge {
  font-size: .65rem; padding: .15rem .5rem; border-radius: 1rem;
  background: #10b981; color: #fff; font-weight: 600;
  display: inline-flex; align-items: center; gap: .25rem;
}
.matchup-card.voted {
  border-color: rgba(16,185,129,.3);
}
.matchup-card.voted .matchup-cta {
  background: linear-gradient(135deg, #10b981, #059669);
}

/* ===== Dashboard CTA ===== */
.dashboard-cta-btn {
  background: rgba(255,255,255,.15); backdrop-filter: blur(4px);
  border: 1px solid rgba(255,255,255,.25);
  color: #fff; padding: .4rem 1rem; border-radius: 2rem;
  font-size: .8rem; font-weight: 500;
  text-decoration: none;
  transition: background .2s;
}
.dashboard-cta-btn:hover {
  background: rgba(255,255,255,.25); color: #fff;
}

/* ===== Mobile ===== */
@media (max-width: 767.98px) {
  .compare-listing-hero { padding: 1rem 1rem 1.25rem; }
  .compare-listing-hero h1 { font-size: 1.25rem; }
  .how-step-line { width: 24px; }
  .how-step { flex: 0 1 100px; }
  .how-step-desc { display: none; }
}
</style>
{% endblock %}

{% block content %}
<section class="py-4 py-md-5">
  <div class="container">

    <!-- Hero Header (full container width, matches comparison page) -->
    <div class="compare-listing-hero text-center mb-3">
      <div class="hero-icon"><i class="bi bi-trophy"></i></div>
      <h1><i class="bi bi-arrow-left-right me-2"></i>Compare AI Writers</h1>
      <p class="hero-sub">Same topic, different AIs â€” pick your matchup and vote.</p>
      <a href="{{ url_for('dashboard') }}" class="dashboard-cta-btn mt-2 d-inline-flex align-items-center gap-1">
        <i class="bi bi-bar-chart"></i> View Dashboard
      </a>
    </div>

    <!-- How It Works (below hero) -->
    <div class="how-steps mb-4">
      <div class="how-step">
        <div class="how-step-num">1</div>
        <div class="how-step-label">Read Blind</div>
        <div class="how-step-desc">Two posts, hidden authors</div>
      </div>
      <div class="how-step-line"></div>
      <div class="how-step">
        <div class="how-step-num">2</div>
        <div class="how-step-label">Vote</div>
        <div class="how-step-desc">Rate across five categories</div>
      </div>
      <div class="how-step-line"></div>
      <div class="how-step">
        <div class="how-step-num">3</div>
        <div class="how-step-label">Reveal</div>
        <div class="how-step-desc">See which AI wrote what</div>
      </div>
    </div>

    <div class="row justify-content-center">
      <div class="col-lg-10">

        {% if matchups %}
        <div class="row g-3">
          {% for m in matchups %}
          {% set has_voted = m.matchup_id in voted_ids %}
          <div class="col-md-6">
            <a href="{{ url_for('view_matchup', matchup_id=m.matchup_id) }}" class="text-decoration-none">
              <div class="card matchup-card border-0 h-100 {% if has_voted %}voted{% endif %}">
                <div class="card-body p-3">
                  <div class="d-flex align-items-center justify-content-between mb-2">
                    <span class="matchup-meta">#{{ m.matchup_id }}</span>
                    <div class="d-flex align-items-center gap-2">
                      {% if has_voted %}
                      <span class="matchup-voted-badge"><i class="bi bi-check-circle-fill"></i> Voted</span>
                      {% endif %}
                      {% if m.category %}
                      <span class="matchup-category-badge"><i class="bi bi-tag me-1"></i>{{ m.category }}</span>
                      {% endif %}
                    </div>
                  </div>
                  <div class="d-flex align-items-center gap-2 mb-3">
                    <div class="matchup-post-box">
                      <div class="matchup-post-label matchup-post-label-a">Post A</div>
                      <div class="matchup-post-title">{{ m.title_a|truncate(40) }}</div>
                    </div>
                    <div class="matchup-vs">VS</div>
                    <div class="matchup-post-box">
                      <div class="matchup-post-label matchup-post-label-b">Post B</div>
                      <div class="matchup-post-title">{{ m.title_b|truncate(40) }}</div>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="matchup-meta">{{ m.created_at.strftime('%b %d, %Y') }}</span>
                    <span class="matchup-cta">
                      {% if has_voted %}
                      <i class="bi bi-eye"></i> View Results
                      {% else %}
                      <i class="bi bi-hand-index-thumb"></i> Compare & Vote
                      {% endif %}
                    </span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          {% endfor %}
        </div>

        {% if total_pages > 1 %}
        <nav class="mt-4" aria-label="Matchup pagination">
          <ul class="pagination justify-content-center">
            <li class="page-item {% if page <= 1 %}disabled{% endif %}">
              <a class="page-link" href="{{ url_for('compare_page', page=page-1) }}">Previous</a>
            </li>
            {% for p in range(1, total_pages + 1) %}
            <li class="page-item {% if p == page %}active{% endif %}">
              <a class="page-link" href="{{ url_for('compare_page', page=p) }}">{{ p }}</a>
            </li>
            {% endfor %}
            <li class="page-item {% if page >= total_pages %}disabled{% endif %}">
              <a class="page-link" href="{{ url_for('compare_page', page=page+1) }}">Next</a>
            </li>
          </ul>
        </nav>
        {% endif %}

        {% else %}
        <div class="text-center py-5">
          <i class="bi bi-inbox text-muted" style="font-size: 3rem;"></i>
          <p class="text-muted mt-3">No active matchups yet. Check back soon!</p>
        </div>
        {% endif %}

      </div>
    </div>
  </div>
</section>

{% endblock %}
